<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
    function LinkedList() {
      let Node = function (element) {
        this.element = element;
        this.next = null;
      }

      // 链表的长度
      let length = 0;
      // 存储第一个节点的引用
      let head = null;

      // 方法
      // 末尾插入元素
      this.append = function (element) {
        // 2种情况：链表为空；链表不为空
        let node = new Node(element);
        let current;  // 从head开始往后遍历
        if(head === null) {
          // 空链表
          head = node;
        } else {
          // 非空链表
          // 从head开始往后遍历
          current = head
          while (current.next) {
            current = current.next;
          }
          // 当current.next指向Null的时候说明到最后一个结点了
          current.next = node;
        }
        length++
      }
      // 指定位置插入元素
      this.insert = function (position, element) {
        // 检查越界值
        if(position > -1 && position < length) {
          // 两种情况：1、第一个元素；2、其他元素
          let current = head;
          let previous;
          let index;
          if(position === 0) {
            // 插入位置为第一个元素
            node.next = current
            head = node
          } else {
            // 其他位置插入
            while (index++ < position) {
              previous = current
              current = current.next;
            }
            node.next = current
            previous.next = node
          }
          length++;
          return true
        } else {
          return false;
        }
      }
      // 删除指定位置的元素
      this.removeAt = function (position) {
        // 检查越界值
        if(position > -1 && position < length) {
          // 两种情况：1、删除第一个元素；2、删除其他元素
          let current = head; // 第一个node的索引
          let previous; // 当前结点的前驱索引
          let index;    // 记录遍历的位置，用来判断临界条件
          if(position === 0) {
            // 删除第一个元素
            head = current.next
          } else {
            // 循环遍历找到指定位置
            while (index++ < position) {
              previous = current;
              current = current.next
            }
            // 找到指定值
            previous.next = current.next
          }
          length--;
          return current.element
        } else {
          return null;
        }
      }
      // 删除指定元素
      this.remove = function (element) {
        let index = this.indexOf(element)
        return this.removeAt(index)
      }
      // 查找指定元素的索引
      this.indexOf = function (element) {
        let current = head;
        let index = -1;
        while (current) {
          if(element === current.element) {
            return index
          }
          current = current.next;
          index++
        }
        return -1
      }
      // 链表是否为空
      this.isEmpty = function () {
        return length === 0
      }
      // 链表包含的元素个数
      this.size = function () {
        return length
      }
      // 获取链表的头部
      this.getHead = function () {
        return head
      }
      // 重写toString方法
      this.toString = function () {
        let current = head;
        let string = '';
        while (current) {
          string += current.element + (current.next ? 'n': '')
          current = current.next
        }
        return string
      }
      //
      this.print = function () {
        
      }

    }
  </script>
</body>
</html>